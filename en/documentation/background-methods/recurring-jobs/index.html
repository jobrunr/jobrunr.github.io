<!doctype html><html lang=en><head><meta charset=utf-8><link rel=dns-prefetch href=https://www.googletagmanager.com><link rel=dns-prefetch href=https://cdn.jsdelivr.net><link rel=dns-prefetch href=https://cdnjs.cloudflare.com><link href=https://cdn.jsdelivr.net/npm/js-cookie@3.0.1/dist/js.cookie.min.js rel=preload as=script><link href=https://cdnjs.cloudflare.com/ajax/libs/prism/1.20.0/prism.min.js rel=preload as=script><link href=https://cdnjs.cloudflare.com/ajax/libs/prism/1.20.0/components/prism-java.min.js rel=preload as=script><link href=https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js rel=preload as=script><script>(function(t,s,o,e,a){t[e]=t[e]||[],t[e].push({'gtm.start':(new Date).getTime(),event:"gtm.js"});var i=s.getElementsByTagName(o)[0],n=s.createElement(o),r=e!="dataLayer"?"&l="+e:'';n.async=!0,n.src="https://www.googletagmanager.com/gtm.js?id="+a+r,i.parentNode.insertBefore(n,i)})(window,document,"script","dataLayer","G-J3K00HKL9D")</script><script type=text/javascript>(function(e,o,t,i,a,n,s){e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},n=o.createElement(i),n.async=1,n.src="https://www.clarity.ms/tag/"+a,s=o.getElementsByTagName(i)[0],s.parentNode.insertBefore(n,s)})(window,document,"clarity","script","gndsmglzod")</script><meta http-equiv=x-ua-compatible content="IE=edge"><title>Recurring jobs · JobRunr</title><meta name=HandheldFriendly content="True"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Create a CRON job in Java using JobRunr with only one line of code."><meta name=keywords content="java recurring job,java cron job,cron,crontab,java cron"><meta name=author content="Ronald Dehuysser, ronald@dehuysser.be"><meta name=twitter:card content="summary"><meta name=twitter:image content="https://www.jobrunr.io/blog/2020-04-23-jobrunr-gets-jobs-done.webp"><meta name=twitter:image:alt content="JobRunr - get jobs done"><meta name=twitter:title content="Recurring jobs"><meta name=twitter:description content="Create a CRON job in Java using JobRunr with only one line of code."><meta name=twitter:creator content="@rdehuyss"><meta name=twitter:site content="@jobrunr"><meta property="og:title" content="Recurring jobs"><meta property="og:description" content="Create a CRON job in Java using JobRunr with only one line of code."><meta property="og:type" content="article"><meta property="og:url" content="https://www.jobrunr.io/en/documentation/background-methods/recurring-jobs/"><meta property="og:image" content="https://www.jobrunr.io/blog/2020-04-23-jobrunr-gets-jobs-done.webp"><meta property="article:section" content="documentation"><meta property="article:published_time" content="2020-09-16T11:12:23+02:00"><meta property="article:modified_time" content="2020-09-16T11:12:23+02:00"><link rel=stylesheet href=https://www.jobrunr.io/scss/custom.min.8135b58e502f426216daba9b673c2e57f5b05394302768c041681c94397b49e1.css integrity="sha256-gTW1jlAvQmIW2rqbZzwuV/WwU5QwJ2jAQWgclDl7SeE=" media=screen><link rel=stylesheet href=https://www.jobrunr.io/scss/screen.min.de02f1ac13102b92f6b48b70f555c88c82299448bff3961357ba59dfd12919ad.css integrity="sha256-3gLxrBMQK5L2tItw9VXIjIIplEi/85YTV7pZ39EpGa0=" media=screen><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/prism/1.20.0/themes/prism.min.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/prism/1.20.0/themes/prism-coy.min.css><link rel=stylesheet type=text/css href=https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css></head><body class=tag-template><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MX5H2KM" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><div class=site-wrapper><header class="site-header leftnav" style=height:64px><div class="outer site-nav-main"><div class=inner><nav id=site-nav class=site-nav><div class=site-nav-left><a class=site-nav-logo href=https://www.jobrunr.io/en/><img src=https://www.jobrunr.io/images/jobrunr-logo-white.webp alt=JobRunr height=21px width=91px></a><div class=site-nav-content><ul class=nav role=menu><li class=nav-home role=menuitem><a href=/en/>Home</a></li><li class=nav-home role=menuitem><a href=/en/documentation/>Documentation</a></li><li class=nav-home role=menuitem><a href=/en/pricing/>JobRunr Pro</a></li><li class=nav-home role=menuitem><a href=/en/use-case/>Use Cases</a></li><li class=nav-home role=menuitem><a href=/en/blog/>Blog</a></li></ul></div></div><div class=site-nav-right><div id=social-links class=social-links><style>div.social-links{position:relative}#lang-selector{display:none;background-color:#90a2aa;position:absolute;left:10px;top:56px;z-index:50}#lang-selector li{list-style-type:none}#lang-selector li a{color:#fff;text-transform:uppercase}</style><a class="social-link social-link-tw" href=https://github.com/jobrunr/website/tree/master/content/en/documentation/background-methods/recurring-jobs.md title="Edit this page on GitHub" target=_blank rel=noopener><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="-3 -3 32 32"><path d="M7.127 22.562.0 24l1.438-7.128 5.689 5.69zm1.414-1.414L19.769 9.923l-5.69-5.692L2.852 15.458l5.689 5.69zM18.309.0l-2.816 2.817 5.691 5.691L24 5.689l-5.691-5.689z"/></svg></a><a class="social-link social-link-tw" href="https://twitter.com/intent/follow?original_referer=https%3A%2F%2Fjobrunr.io&screen_name=jobrunr&tw_p=followbutton" title="Follow us on Twitter" target=_blank rel=noopener><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088.0 01-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015.0 01-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25.0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688.0 5.063-.875 7.188-2.5-1.25.0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5.0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673.0 01-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228.0 01-1.875-2c-.5-.875-.688-1.813-.688-2.75.0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579.0 011.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48.0 003.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg></a><a class="social-link social-link-gh" style=color:#fff href=https://github.com/jobrunr/jobrunr title="View code on Github" target=_blank rel=noopener><svg viewBox="-3 -3 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M12 .297c-6.63.0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577.0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93.0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176.0.0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22.0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22.0 1.606-.015 2.896-.015 3.286.0.315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>Source Code</a>
<script>const langLink=document.getElementById("lang-link");if(langLink){const e=document.getElementById("lang-selector"),t=()=>{e.style.display="none"},n=()=>{e.style.display="block",setTimeout(t,3e3)};langLink.addEventListener("mouseover",n)}</script></div></div></nav></div></div></header><main id=site-main class="site-main documentation outer"><div class=inner><aside><ul><li><a href=/en/documentation/5-minute-intro/>5 minute intro</a></li><ul class=sub-menu></ul><li><a href=/en/documentation/installation/>Installation</a></li><ul class=sub-menu><li><a href=/en/documentation/installation/storage/>Storage</a></li></ul><li><a href=/en/documentation/configuration/>Configuration</a></li><ul class=sub-menu><li><a href=/en/documentation/configuration/fluent/>Fluent API</a></li><li><a href=/en/documentation/configuration/spring/>Spring Boot Starter</a></li><li><a href=/en/documentation/configuration/micronaut/>Micronaut Integration</a></li><li><a href=/en/documentation/configuration/quarkus/>Quarkus Extension</a></li></ul><li class=active><a href=/en/documentation/background-methods/>Background methods</a></li><ul class=sub-menu><li><a href=/en/documentation/background-methods/dashboard/>Dashboard</a></li><li><a href=/en/documentation/background-methods/enqueueing-jobs/>Enqueueing jobs</a></li><li><a href=/en/documentation/background-methods/scheduling-jobs/>Scheduling jobs</a></li><li class=active><a href=/en/documentation/background-methods/recurring-jobs/>Recurring jobs</a></li><li><a href=/en/documentation/background-methods/deleting-jobs/>Deleting jobs</a></li><li><a href=/en/documentation/background-methods/passing-arguments/>Passing arguments</a></li><li><a href=/en/documentation/background-methods/background-jobs-dependencies/>Background job dependencies</a></li><li><a href=/en/documentation/background-methods/dealing-with-exceptions/>Dealing with exceptions</a></li><li><a href=/en/documentation/background-methods/logging-progress/>Logging & job progress</a></li><li><a href=/en/documentation/background-methods/best-practices/>Best practices</a></li></ul><li><a href=/en/documentation/pro/>JobRunr Pro</a></li><ul class=sub-menu><li><a href=/en/documentation/pro/jobrunr-pro-dashboard/>JobRunr Pro Dashboard</a></li><li><a href=/en/documentation/pro/observability/>Observability</a></li><li><a href=/en/documentation/pro/transactions/>Transaction plugin</a></li><li><a href=/en/documentation/pro/real-time-scheduling/>Real-time scheduling and enqueueing</a></li><li><a href=/en/documentation/pro/dynamic-queues/>Dynamic Queues</a></li><li><a href=/en/documentation/pro/priority-queues/>Priority Queues</a></li><li><a href=/en/documentation/pro/job-chaining/>Workflows using Job Chains</a></li><li><a href=/en/documentation/pro/batches/>Batches</a></li><li><a href=/en/documentation/pro/advanced-cron-expressions/>Advanced CRON expressions</a></li><li><a href=/en/documentation/pro/server-tags/>Server Tags</a></li><li><a href=/en/documentation/pro/mutexes/>Mutexes</a></li><li><a href=/en/documentation/pro/results/>Job Result</a></li><li><a href=/en/documentation/pro/replace-jobs/>Replacing jobs</a></li><li><a href=/en/documentation/pro/job-filters/>Job Filters</a></li><li><a href=/en/documentation/pro/job-timeout/>Job time-outs</a></li><li><a href=/en/documentation/pro/custom-delete-policy/>Custom delete policy</a></li><li><a href=/en/documentation/pro/database-fault-tolerance/>Database Fault Tolerance</a></li><li><a href=/en/documentation/pro/migrations/>CI / CD & Job Migrations</a></li><li><a href=/en/documentation/pro/database-migrations/>Database Migrations</a></li><li><a href=/en/documentation/pro/issuetracking-integration/>Issue Tracking Integration</a></li></ul><li><a href=/en/documentation/faq/>FAQ</a></li><ul class=sub-menu></ul><li><a href=/en/documentation/alternatives/>JobRunr compared</a></li><ul class=sub-menu></ul></ul></aside><article class="post-full post no-image no-image"><header class=post-full-header><h1 class=post-full-title>Recurring jobs</h1><p class=post-full-custom-excerpt>Schedule recurring jobs with a single line of code using any CRON expression or interval.</p></header><section class=post-full-content><p>Creating a recurring job (either a CRON job or a job with a fixed defined interval) is just as simple as creating a background job – you only need to write a single line of code (and it is even less if you use the <code>jobrunr-spring-boot-starter</code>, <code>jobrunr-micronaut-feature</code> or the <code>jobrunr-quarkus-extension</code>).</p><p>On this page you can learn about:</p><ul><li><a href=#using-a-cron-expression>Create a recurring job using a CRON expression</a></li><li><a href=#using-an-interval>Create a recurring job using an Interval</a></li><li><a href=#managing-recurring-jobs>Managing recurring jobs</a></li><li><a href=#deleting-recurring-jobs>Deleting recurring jobs</a></li><li><a href=#important-remarks>Important remarks!</a></li><li><span class="label professional"><span>JobRunr Pro</span></span> <a href=#recurring-jobs-missed-during-downtime>Recurring jobs missed during downtime</a></li><li><span class="label professional"><span>JobRunr Pro</span></span> <a href=#concurrent-recurring-jobs>Concurrent recurring jobs</a></li></ul><blockquote><p>Note that JobRunr OSS supports up to <strong>100 recurring jobs</strong> (depending on the performance of your SQL or NoSQL database). Do you need to run more than 100 recurring jobs? This is supported in JobRunr Pro!</p></blockquote><blockquote><p>Note that recurring jobs may not be executed on the exact moment you specify using your CRON expression: Whenever JobRunr fetches all the jobs that are scheduled and need to be executed, it fetches all jobs that need to happen in the next poll interval and enqueues them immediately. This may result in a difference of a couple of seconds. If you need real-time scheduling, then have a look at <a href=https://www.jobrunr.io/en/documentation/pro/real-time-scheduling/>JobRunr Pro</a>.</p></blockquote><h2 id=using-a-cron-expression>Using a CRON expression</h2><figure><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>BackgroundJob<span style=color:#f92672>.</span><span style=color:#a6e22e>scheduleRecurrently</span><span style=color:#f92672>(</span>Cron<span style=color:#f92672>.</span><span style=color:#a6e22e>daily</span><span style=color:#f92672>(),</span> <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Easy!&#34;</span><span style=color:#f92672>));</span>
</span></span></code></pre></div></figure><p>This line creates a new recurring CRON job entry in the <code>StorageProvider</code>. A special component in <code>BackgroundJobServer</code> checks the recurring jobs with a fixed interval (the <code>pollIntervalInSeconds</code>) and then enqueues them as fire-and-forget jobs. This enables you to track them as usual.</p><p>The <code>Cron</code> class contains different methods and overloads to run jobs on a minute, hourly, daily, weekly, monthly and yearly basis. You can also use a standard CRON expressions to specify a more complex schedule:</p><figure><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>BackgroundJob<span style=color:#f92672>.</span><span style=color:#a6e22e>scheduleRecurrently</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;0 12 * */2&#34;</span><span style=color:#f92672>,</span> <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Powerful!&#34;</span><span style=color:#f92672>));</span>
</span></span></code></pre></div></figure><p>All these methods are also available on the <code>JobScheduler</code> and <code>JobRequestScheduler</code> bean:</p><figure><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Inject</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>private</span> JobScheduler jobScheduler<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>jobScheduler<span style=color:#f92672>.</span><span style=color:#a6e22e>scheduleRecurrently</span><span style=color:#f92672>(</span>Cron<span style=color:#f92672>.</span><span style=color:#a6e22e>daily</span><span style=color:#f92672>(),</span> <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Easy!&#34;</span><span style=color:#f92672>));</span>
</span></span></code></pre></div></figure><figure><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Inject</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>private</span> JobRequestScheduler jobRequestScheduler<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>jobRequestScheduler<span style=color:#f92672>.</span><span style=color:#a6e22e>scheduleRecurrently</span><span style=color:#f92672>(</span>Cron<span style=color:#f92672>.</span><span style=color:#a6e22e>daily</span><span style=color:#f92672>(),</span> <span style=color:#66d9ef>new</span> SysOutJobRequest<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Easy!&#34;</span><span style=color:#f92672>));</span>
</span></span></code></pre></div></figure><p>You can also create a recurring job with a CRON expression using the builder pattern:</p><figure><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Inject</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>private</span> JobScheduler jobScheduler<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>jobScheduler<span style=color:#f92672>.</span><span style=color:#a6e22e>createRecurrently</span><span style=color:#f92672>(</span>aRecurringJob<span style=color:#f92672>()</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>.</span><span style=color:#a6e22e>withCron</span><span style=color:#f92672>(</span>Cron<span style=color:#f92672>.</span><span style=color:#a6e22e>daily</span><span style=color:#f92672>())</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>.</span><span style=color:#a6e22e>withDetails</span><span style=color:#f92672>(()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;I&#39;m created by the builder!&#34;</span><span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>    
</span></span></code></pre></div></figure><p>If you are using the <code>jobrunr-spring-boot-starter</code>, the <code>jobrunr-micronaut-feature</code> or the <code>jobrunr-quarkus-extension</code> this becomes even easier: just add the <code>@Recurring</code> annotation to any bean method and JobRunr will schedule it as a recurring job:</p><figure><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>    <span style=color:#a6e22e>@Recurring</span><span style=color:#f92672>(</span>id <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;my-recurring-job&#34;</span><span style=color:#f92672>,</span> cron <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;*/5 * * * *&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Job</span><span style=color:#f92672>(</span>name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;My recurring job&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>executeSampleJob</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// your business logic here
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#f92672>}</span>
</span></span></code></pre></div></figure><h2 id=using-an-interval>Using an Interval</h2><p>Instead of giving a Cron expression, you can also give a duration. This will make sure that the recurring job will now be executed using a fixed interval starting the moment the recurring job was scheduled.</p><figure><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>BackgroundJob<span style=color:#f92672>.</span><span style=color:#a6e22e>scheduleRecurrently</span><span style=color:#f92672>(</span>Duration<span style=color:#f92672>.</span><span style=color:#a6e22e>parse</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;P5D&#34;</span><span style=color:#f92672>),</span> <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Easy!&#34;</span><span style=color:#f92672>));</span>
</span></span></code></pre></div></figure><p>Also in this case, you can create a recurring job with a fixed interval using the builder pattern:</p><figure><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Inject</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>private</span> JobScheduler jobScheduler<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>jobScheduler<span style=color:#f92672>.</span><span style=color:#a6e22e>createRecurrently</span><span style=color:#f92672>(</span>aRecurringJob<span style=color:#f92672>()</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>.</span><span style=color:#a6e22e>withInterval</span><span style=color:#f92672>(</span>Duration<span style=color:#f92672>.</span><span style=color:#a6e22e>ofDays</span><span style=color:#f92672>(</span>3<span style=color:#f92672>))</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>.</span><span style=color:#a6e22e>withDetails</span><span style=color:#f92672>(()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;I&#39;m created by the builder!&#34;</span><span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>    
</span></span></code></pre></div></figure><p>If you are using the <code>jobrunr-spring-boot-starter</code>, the <code>jobrunr-micronaut-feature</code> or the <code>jobrunr-quarkus-extension</code> this stays as easy as with a CRON expression: add the <code>@Recurring</code> annotation to any bean method with the <code>interval</code> attribute where you can pass an ISO8601 duration. JobRunr will schedule it again as a recurring job using the provided interval:</p><figure><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>    <span style=color:#a6e22e>@Recurring</span><span style=color:#f92672>(</span>id <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;my-recurring-job&#34;</span><span style=color:#f92672>,</span> interval <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;P2D8H&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Job</span><span style=color:#f92672>(</span>name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;My recurring job&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>executeSampleJob</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// your business logic here
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#f92672>}</span>
</span></span></code></pre></div></figure><h2 id=managing-recurring-jobs>Managing recurring jobs</h2><p>Each recurring job has its own unique identifier. In the previous examples it was generated implicitly, using the type and method names of the given lambda expression (resulting in &ldquo;<code>System.out.println()</code>&rdquo; as the identifier). The <code>BackgroundJob</code> and <code>JobScheduler</code> class contains overloads that take an explicitly defined job identifier. This way, you can refer to the job later on.</p><figure><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>BackgroundJob<span style=color:#f92672>.</span><span style=color:#a6e22e>scheduleRecurrently</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;some-id&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;0 12 * */2&#34;</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Powerful!&#34;</span><span style=color:#f92672>));</span>
</span></span></code></pre></div></figure><p>If you are using the <code>JobBuilder</code> pattern, this becomes:</p><figure><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>BackgroundJob<span style=color:#f92672>.</span><span style=color:#a6e22e>createRecurrently</span><span style=color:#f92672>(</span>aRecurringJob<span style=color:#f92672>()</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>.</span><span style=color:#a6e22e>withId</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;some-id&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>.</span><span style=color:#a6e22e>withCron</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;0 12 * */2&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>.</span><span style=color:#a6e22e>withDetails</span><span style=color:#f92672>(()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Powerful!&#34;</span><span style=color:#f92672>)));</span>
</span></span></code></pre></div></figure><p>The methods above will create a new recurring job if no recurring job with that id exists or else update the existing job with the given identifier.</p><blockquote><p>Identifiers should be unique - use unique identifiers for each recurring job, otherwise you’ll end with a single job.</p></blockquote><h2 id=deleting-recurring-jobs>Deleting recurring jobs</h2><p>You can remove an existing recurring job either via the dashboard or by calling the <code>BackgroundJob.delete</code> method with the id of the recurring job. It does not throw an exception when there is no such recurring job.</p><h2 id=recurring-jobs-missed-during-downtime>Recurring jobs missed during downtime</h2><span class="label professional"><span>JobRunr Pro</span></span><p>If for some reason all of your servers are down (e.g. deploying a new version / scheduled down time / &mldr;), JobRunr OSS skips these recurring jobs: as there is no background job server running, it will not be able to schedule these recurring jobs.</p><p><strong>JobRunr Pro improves this and adds the capability to catch up all of the skipped recurring jobs</strong>: for each run that was skipped during the downtime for a certain recurring job, it will schedule a job.</p><p>This feature is disabled by default and can be enabled using the following setting:</p><figure><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>    <span style=color:#a6e22e>@Recurring</span><span style=color:#f92672>(</span>id <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;my-recurring-job&#34;</span><span style=color:#f92672>,</span> interval <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;P2D8H&#34;</span><span style=color:#f92672>,</span> scheduleJobsSkippedDuringDowntime<span style=color:#f92672>=</span><span style=color:#66d9ef>true</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Job</span><span style=color:#f92672>(</span>name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;My recurring job&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>executeSampleJob</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// your business logic here
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#f92672>}</span>
</span></span></code></pre></div></figure><p>If you are using the <code>JobBuilder</code>, this is also possible:</p><figure><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>BackgroundJob<span style=color:#f92672>.</span><span style=color:#a6e22e>createRecurrently</span><span style=color:#f92672>(</span>aRecurringJob<span style=color:#f92672>()</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>.</span><span style=color:#a6e22e>withId</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;some-id&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>.</span><span style=color:#a6e22e>withCron</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;0 12 * */2&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>.</span><span style=color:#a6e22e>withScheduleJobsSkippedDuringDowntime</span><span style=color:#f92672>()</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>.</span><span style=color:#a6e22e>withDetails</span><span style=color:#f92672>(()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Powerful!&#34;</span><span style=color:#f92672>)));</span>
</span></span></code></pre></div></figure><h2 id=concurrent-recurring-jobs>Concurrent recurring jobs</h2><span class="label professional"><span>JobRunr Pro</span></span><p>JobRunr by default does not allow concurrent recurring jobs - the reason being is that if your recurring jobs for some reason take longer than the given CRON expression or interval, you may create more jobs than you can process.
So, if a job instance created by a recurring job is still in state <code>SCHEDULED</code>, <code>ENQUEUED</code> or <code>PROCESSING</code> and it&rsquo;s time to again queue a new instance of the recurring job then this last instance will not be created.</p><p>Sometimes the business requirements define that recurring jobs may not be skipped in any case and your recurring job runs very fast in 95% of the cases. But you have some outliers (e.g. due to a lot of work to process) that may take longer than the given CRON expression or interval. <strong>JobRunr Pro comes to the rescue</strong> with the option <code>maxConcurrentJobs</code> to create a certain amount of job instances of that recurring job that will run concurrently.</p><p>By default, <code>maxConcurrentJobs</code> is set to 1 but this setting can be changed per recurring job:</p><figure><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>    <span style=color:#a6e22e>@Recurring</span><span style=color:#f92672>(</span>id <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;my-recurring-job&#34;</span><span style=color:#f92672>,</span> interval <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;PT5M&#34;</span><span style=color:#f92672>,</span> maxConcurrentJobs<span style=color:#f92672>=</span>4<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Job</span><span style=color:#f92672>(</span>name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;My recurring job&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>executeSampleJob</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// if for some reason this method takes more than 5 minutes (=PT5M), 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>// JobRunr will create up to 4 concurrent job instances of this recurring job
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#f92672>}</span>
</span></span></code></pre></div></figure><p>If you are using the JobBuilder, this is also possible:</p><figure><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>BackgroundJob<span style=color:#f92672>.</span><span style=color:#a6e22e>createRecurrently</span><span style=color:#f92672>(</span>aRecurringJob<span style=color:#f92672>()</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>.</span><span style=color:#a6e22e>withId</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;some-id&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>.</span><span style=color:#a6e22e>withInterval</span><span style=color:#f92672>(</span>Duration<span style=color:#f92672>.</span><span style=color:#a6e22e>ofMinutes</span><span style=color:#f92672>(</span>5<span style=color:#f92672>))</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>.</span><span style=color:#a6e22e>withMaxConcurrentJobs</span><span style=color:#f92672>(</span>4<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>.</span><span style=color:#a6e22e>withDetails</span><span style=color:#f92672>(()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Powerful!&#34;</span><span style=color:#f92672>)));</span>
</span></span></code></pre></div></figure><h2 id=important-remarks>Important remarks!</h2><blockquote><p><strong>Remark 1:</strong> for recurring jobs to work, at least one BackgroundJobServer should be running all the time.</p></blockquote><blockquote><p><strong>Remark 2:</strong> also, for recurring job to work, they should be registered at application startup (which can either be a webapp, a console app, &mldr;). This is different for each application/environment. The easiest way to do so is via the <code>@Recurring</code> annotation that ships with the <code>jobrunr-spring-boot-starter</code>, the <code>quarkus-jobrunr</code> extension or the <code>jobrunr-micronaut-feature</code> as shown above. If you are not using an integration with a certain framework, you will need to register these scheduled jobs yourselves using Container Startup Event listeners.</p></blockquote><blockquote><p><strong>Remark 3:</strong> please note that the <strong>cron interval</strong> or <strong>duration</strong> for your recurring jobs <strong>must be more than your <code>pollIntervalInSeconds</code></strong>. If your <code>pollIntervalInSeconds</code> is greater than your cron interval or duration of your recurring jobs, JobRunr will launch multiple instances of the same recurring job to keep up. This means that the same recurring job will be launched multiple times at the same moment.</p></blockquote><blockquote><p><strong>Remark 4:</strong> also note that the <strong>smallest possible cron interval</strong> for your recurring jobs is <strong>every 5 seconds</strong>. JobRunr prevents creating recurring jobs with cron values less than every 5 seconds (e.g. every second) as it would generate too much load on your StorageProvider (SQL or noSQL database).</p></blockquote></section></article></div></main><footer class="site-footer outer"><div class="site-footer-content inner"><section class=copyright style=align-self:start>&copy; <a href=https://www.jobrunr.io>JobRunr</a></section><section class=love style=align-self:start;opacity:.7>Made with <strong style=color:red;font-size:large>&#9829;</strong> in Belgium</section><nav class=site-footer-nav><div><div><a href=/en/about/ rel=noopener style=opacity:.5>JobRunr by Rosoco BV (BE 0807596165)</a></div><div><a href=/en/licensing/info/ rel=noopener style=opacity:.5>Terms of use</a></div><div><a href=/en/privacy/ rel=noopener style=opacity:.5>Privacy</a></div></div></nav></div></footer></div><script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.20.0/prism.min.js defer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.20.0/components/prism-java.min.js defer></script>
<script src=https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js defer></script>
<script>window.addEventListener("load",e=>{setTimeout(()=>{window.cookieconsent.initialise({palette:{popup:{background:"#000"},button:{background:"transparent",border:"#fff",text:"#fff"}},content:{link:"Learn more about cookies"}})},5e3)});for(var links=document.querySelectorAll("a"),i=0;i<links.length;i++)links[i].hostname!=window.location.hostname&&(links[i].target="_blank",links[i].rel="noopener")</script></body></html>